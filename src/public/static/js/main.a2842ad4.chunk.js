(this["webpackJsonpbot-client"]=this["webpackJsonpbot-client"]||[]).push([[0],{53:function(e,t,n){"use strict";n.r(t);var r=n(12),a=n(2),c=n(3),i=n.n(c),u=n(15),s=n(4),o=n(13),l=n(5),p=n(0),b=n.n(p),h=n(25),d=n(27),f=n.n(d).a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DEV_HOST||"./"}),j=n(1),O=Object(h.a)("secret"),x=b.a.createContext({}),v=function(e){var t=e.children,n=O(""),r=Object(l.a)(n,2),a=r[0],c=r[1],u=Object(p.useState)(!1),o=Object(l.a)(u,2),b=o[0],h=o[1];function d(e){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.defaults.headers.common.client_id=t,e.next=3,f.get("/api").then((function(){c(t),h(!0)})).catch((function(){c(""),h(!0)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/api/channel");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(s.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/api/channel/".concat(n,"/").concat(t?"enable":"disable"));case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(s.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/api/channel/".concat(n,"/priority/").concat(t));case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(s.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.delete("/api/channel/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(s.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.post("/api/channel/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(p.useEffect)((function(){function e(){return(e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var k=""!==a;return Object(j.jsx)(x.Provider,{value:{login:d,logout:function(){delete f.defaults.headers.common.client_id,c("")},listChannels:function(){return m.apply(this,arguments)},setEnabled:function(e,t){return y.apply(this,arguments)},setPriority:function(e,t){return w.apply(this,arguments)},deleteChannel:function(e){return C.apply(this,arguments)},addChannel:function(e){return g.apply(this,arguments)},isInitialized:b,isAuthenticated:k,clientId:a},children:t})},m=function(e){var t,n,r,a=e.user_name,c=e.user_login,u=e.enabled,o=e.priority,l=e.setEnabled,p=e.setPriority,b=e.deleteChannel;function h(){return(h=Object(s.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(t),t=setTimeout((function(){l(Boolean(n.target.checked),c)}),2e3);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(n),n=setTimeout((function(){p(Number(t.target.value),c)}),2e3);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(r),r=setTimeout((function(){b(c)}),2e3);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"enabled",children:"Enabled"}),Object(j.jsx)("input",{name:"enabled",type:"checkbox",onChange:function(e){return h.apply(this,arguments)},defaultChecked:u}),Object(j.jsx)("input",{name:"priority",type:"number",onChange:function(e){return d.apply(this,arguments)},defaultValue:o}),Object(j.jsx)("div",{children:a}),Object(j.jsx)("button",{type:"button",onClick:function(e){return f.apply(this,arguments)},children:"Delete"})]})},y=function(){var e=Object(a.f)(),t=Object(p.useState)([]),n=Object(l.a)(t,2),r=n[0],c=n[1],b=Object(p.useState)(""),h=Object(l.a)(b,2),d=h[0],f=h[1],O=Object(p.useContext)(x),v=O.logout,y=O.isAuthenticated,w=O.isInitialized,C=O.listChannels,g=O.setEnabled,k=O.setPriority,E=O.deleteChannel,_=O.addChannel;function S(){return(S=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(d);case 2:t=e.sent,console.log(t,"created"),c([t].concat(Object(o.a)(r)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return P.apply(this,arguments)}function P(){return(P=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return n=e.sent,C().then((function(e){c(Object(o.a)(e))})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.useEffect)((function(){w&&(y||e("/"),C().then((function(e){c(Object(o.a)(e))})))}),[y,w,e]),Object(j.jsxs)("div",{children:["is logged",Object(j.jsx)("button",{onClick:v,children:"sair"}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"channel_name",children:"New"}),Object(j.jsx)("input",{onChange:function(e){var t=e.target;return f(t.value)},type:"text",name:"channel_name"}),Object(j.jsx)("button",{onClick:function(){return S.apply(this,arguments)},type:"button",disabled:d.length<4,children:"Save"})]}),r.map((function(e){return Object(j.jsx)(m,Object(u.a)(Object(u.a)({},e),{},{setEnabled:g,setPriority:k,deleteChannel:T}),e.user_id)}))]})]})},w=function(){var e=Object(a.f)(),t=Object(p.useState)(""),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(p.useContext)(x),u=i.isAuthenticated,s=i.login,o=i.clientId;return console.log(u,o),Object(p.useEffect)((function(){u&&e("/dash")}),[u,e]),Object(j.jsx)("div",{children:Object(j.jsx)("form",{onSubmit:function(e){e.preventDefault(),s(r)},children:Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"secret",children:"Secret:"}),Object(j.jsx)("input",{type:"password",onChange:function(e){var t=e.target;return c(t.value)},name:"secret"}),Object(j.jsx)("button",{type:"submit",children:"Entrar"})]})})})};function C(){return Object(j.jsx)(r.a,{children:Object(j.jsxs)(a.c,{children:[Object(j.jsx)(a.a,{path:"/",element:Object(j.jsx)(w,{})}),Object(j.jsx)(a.a,{path:"/dash",element:Object(j.jsx)(y,{})})]})})}var g=function(){return Object(j.jsx)(v,{children:Object(j.jsx)(C,{})})},k=n(28);Object(k.render)(Object(j.jsx)(g,{}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.a2842ad4.chunk.js.map